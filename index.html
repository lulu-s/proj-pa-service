<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica, sans-serif;
        }

        body,
        html {
            width: 100%;
            height: 100%;
            background: #333333;
            overflow: hidden;
        }

        #app {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            /* background: url(./assets/image/aide_black.png) no-repeat -100px 50px; */
        }

        .loading {
            position: absolute;
            left: 0;
            top: 0;
            background: #333333;
            animation: fade .4s linear forwards .5s;
            pointer-events: none;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            z-index: 999;
        }

        .loading img {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            right: 0;
            margin: auto;
            width: 70%;
        }

        @keyframes fade {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        .component {
            height: 100%;
            width: 100%;
            /* position: absolute;
            left: 0;
            top: 0; */
            display: flex;
            flex-flow: column;
            flex-grow: 1;
            position: relative;
        }

        .shade {
            width: 100%;
            height: 50px;
            pointer-events: none;
            background: transparent;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
        }

        .shade_scroll {
            background: linear-gradient(to bottom, #000 0, rgba(0, 0, 0, 0) 100%);
        }

        .old {
            transition: all .4s ease;
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            overflow-y: scroll;
        }
        
        .old::-webkit-scrollbar {
            display: none;
        }

        .oldbox {
            opacity: 0;
            animation: move_bottom .5s cubic-bezier(0, 0.55, 0.58, 1) forwards;
        }

        @keyframes move_bottom {
            0% {
                opacity: 0;
                margin-top: 30px;
            }

            100% {
                opacity: 1;
                margin-bottom: 0;
            }
        }


        .answer {
            color: #fff;
            transition: all .4s ease;
            /* animation: move_top .5s cubic-bezier(0, 0.55, 0.58, 1) forwards; */

            /* display: flex;
            align-items: center; */
        }

        @keyframes move_top {
            0% {
                transform: translateY(0);
            }

            100% {
                opacity: 1;
                transform: translateY(-30px);
            }
        }

        .text {
            margin: 15px 25px;
            font-size: 1rem;
            display: inline-block;
            background: rgba(255, 255, 255, 1);
            border-radius: 10px 10px 10px 0px;
            color: #000;
            padding: 8px 15px;
            line-height: 1.5rem;
            transition: all .4s ease;
            position: relative;
        }

        .text_left::before,
        .text_right::before {
            content: '';
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: transparent;
            border: 5px solid #f7931e;
            position: absolute;
            background: #000;
        }

        .text_left::before {
            left: -15px;
            bottom: -15px;
        }

        .text_right::before {
            right: -15px;
            top: -15px;
        }

        .btn {
            display: inline-block;
            animation: move_bottom .5s cubic-bezier(0, 0.55, 0.58, 1) forwards;
            opacity: 0;
        }

        /* .btnbox {
            display: flex;
            flex-flow: row;
            
        } */

        .line {
            border-radius: 20px;
            padding: 8px 18px;
            background: transparent;
            color: #fff;
            /* border: 0; */
            border: 2px solid #fff;
            margin: 5px;
            font-size: 1rem;
            outline: none;
            transition: all .4s ease;
            cursor: pointer;
        }

        .line:active {
            color: #333;
            background: #fff;
        }

        .select {
            color: #333;
            background: #fff;
            font-weight: bold;
        }

        /* ref */
        .actions {
            width: 100%;
            /* background: blue; */
        }


        .tips {
            display: flex;
            /* flex-flow: row; */
            flex-wrap: wrap;
            /* height: 30px; */
            /* display: none; */
            margin: 10px 20px 10px;
        }

        .inputbox {
            width: 100%;
            /* height: 120px; */
            display: flex;
            margin-bottom: 20px;
            align-items: center;
            justify-content: center;
            /* animation: move_bottom .5s cubic-bezier(0, 0.55, 0.58, 1) forwards; */
        }

        .input {
            width: 75%;
            height: 40px;
            /* margin: 20px; */
            border-radius: 8px 0px 0px 8px;
            background: #4d4d4d;
            border: 0;
            outline: none;
            /* padding-left: 20px; */
            padding: 0;
            padding-left: 10px;
            color: #fff;
            font-size: 1rem;
            font-weight: bold;
            transition: all .3s ease;
        }

        .input_err {
            pointer-events: none;
            background: #000;
            color: coral;
        }

        .input_btn {
            background: #f6921e;
            border: 0;
            border-radius: 0px 8px 8px 0px;
            width: 40px;
            height: 40px;
            /* margin: 20px 20px 0 0; */
            outline: none;
            transition: all .3s ease;
            cursor: pointer;
        }

        .input_btn:active {
            background: #fff;
        }

        .input_btn img {
            width: 40%;
        }

        .circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: pink;
            position: relative;
            top: -50px;
            left: 0;
            text-align: center;
            line-height: 30px;
        }
    </style>
</head>

<body>
    <div class="loading">
        <img src="./assets/image/aide.png" alt="">
    </div>
    <div id="app">
        <div class="component" v-if="env.answer">
            <div class="shade" :class="{shade_scroll: env.shade}"></div>
            <div class="old" ref="oldlist">
                <div class="answer" v-for="pro, i in env.answer"
                    :style="{'animation-delay': (i + 1) * 0.4 + 0.9 + 's', 'text-align': pro.dir != null ? 'right' : 'left'}">
                    <div :id="i"
                        :style="{'border-radius': pro.dir != null ? '15px 0px 15px 15px' : '15px 15px 15px 0px'}"
                        class="text" :class="{text_right: pro.dir != null , text_left: pro.dir == null }"
                        v-html="pro.msg"> </div>
                </div>
            </div>
        </div>
        <div class="actions">
            <div class="tips">
                <div class="btn" v-for="an in env.selected.actions" v-if="an.type == 'button'">
                    <button class="line"
                        :class="{select: env.filter_select != null && an.title == env.filter_select.name ? 1 : 0}"
                        @click="select(an.target)">{{an.title}}</button>
                </div>
                <div class="btn" v-for="filter in env.filters">
                    <button class="line"
                        :class="{select: env.filter_select != null && filter.name == env.filter_select.name  ? 1 : 0}"
                        @click="select(filter.key)">{{filter.name}}</button>
                </div>
            </div>
            <div class="inputbox">
                <input class="input" :class="{input_err: env.input_error}" @input="filter_index" ref="input"
                    placeholder="Type to filter..." type="text">
                <button @click="input_commit" class="input_btn"><img src="./assets/image/箭头.png" alt=""></button>
                <div class="error">{{env.err}}</div>
            </div>
        </div>
    </div>

    <script src="./src/main.js"></script>
</body>

</html>